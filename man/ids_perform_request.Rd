% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ids.R
\name{ids_perform_request}
\alias{ids_perform_request}
\title{Perform the request URL to the GeoSource service}
\usage{
ids_perform_request(url, timeout = 60)
}
\arguments{
\item{url}{\code{character}. The complete request URL to query, usually produced
by \code{\link[=ids_build_url]{ids_build_url()}}.}

\item{timeout}{\code{numeric}. Maximum duration (in seconds) for the request
before timing out. Default is \code{60}.}
}
\value{
A \code{httr2_response} object if the request succeeds, or \code{NULL} if both attempts
fail.
}
\description{
This internal helper executes an HTTP GET request to the specified URL,
typically generated by \code{\link[=ids_build_url]{ids_build_url()}}, to retrieve data from the French
Ministry of Culture's "Atlas du Patrimoine" GeoSource service.
It includes a retry mechanism in case of connection failure.
}
\details{
The function uses the \strong{httr2} framework for HTTP requests.
If the first request attempt fails (e.g., due to network latency or server
issues), it waits for 5 seconds and retries once before returning \code{NULL}.

Progress and error messages are displayed via \code{message()} and \code{warning()}.
}
\examples{
\dontrun{
# Build a URL for a given extent and department
bbox <- list(left = -2.5, right = -1.0, bottom = 47.0, top = 47.8)
url <- ids_build_url(extent = bbox, insee_dep = "44")

# Perform the HTTP request (returns a httr2_response object)
res <- ids_perform_request(url)
}

}
\seealso{
\code{\link[=ids_build_url]{ids_build_url()}} for URL generation.
}
\keyword{internal}
